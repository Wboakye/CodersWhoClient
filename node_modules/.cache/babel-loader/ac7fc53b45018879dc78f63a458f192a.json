{"ast":null,"code":"var _jsxFileName = \"/Users/william/Desktop/codersWho/coderswhoclient/src/actions/auth-actions.js\";\nimport axios from 'axios';\nimport React from 'react';\nimport { Redirect } from 'react-router';\nimport * as c from '../redux/constants';\nimport store from '../redux/store';\nconst host = 'http://localhost:3005'; //const host = process.env.API_HOST;\n//LOGIN\n\nexport function login(username, password) {\n  return dispatch => {\n    dispatch(setLoginPending(true));\n    dispatch(setLoginSuccess(false));\n    dispatch(setLoginError(null));\n    callLoginApi(username, password, (data, error) => {\n      dispatch(setLoginPending(false));\n\n      if (!error) {\n        console.log(data);\n        dispatch(setUserToken(data.token));\n        dispatch(setLoginSuccess(true));\n        return React.createElement(Redirect, {\n          to: \"/posts\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26\n          },\n          __self: this\n        });\n      } else {\n        dispatch(setLoginError(error));\n      }\n    });\n  };\n}\nexport function logout() {\n  return dispatch => {\n    sessionStorage.removeItem('CWJWT');\n    dispatch(setLoginSuccess(false));\n  };\n}\nexport function verifyLoggedIn() {\n  if (!store.getState().isLoginSuccess === true) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nfunction setLoginPending(isLoginPending) {\n  return {\n    type: c.SET_LOGIN_PENDING,\n    isLoginPending\n  };\n}\n\nfunction setLoginSuccess(isLoginSuccess) {\n  return {\n    type: c.SET_LOGIN_SUCCESS,\n    isLoginSuccess\n  };\n}\n\nfunction setLoginError(loginError) {\n  return {\n    type: c.SET_LOGIN_ERROR,\n    loginError\n  };\n}\n\nfunction setUserToken(token) {\n  return {\n    type: c.SET_USER_TOKEN,\n    token\n  };\n}\n\nfunction callLoginApi(username, password, callback) {\n  axios.post(host + '/api/user/login', {\n    username: username,\n    password: password\n  }).then(response => {\n    console.log(response);\n    sessionStorage.setItem('CWJWT', response.data.token);\n    return callback(response.data, null);\n  }).catch(function (error) {\n    console.log(null, error);\n    return callback(new Error('Invalid email and password'));\n  });\n}","map":{"version":3,"sources":["/Users/william/Desktop/codersWho/coderswhoclient/src/actions/auth-actions.js"],"names":["axios","React","Redirect","c","store","host","login","username","password","dispatch","setLoginPending","setLoginSuccess","setLoginError","callLoginApi","data","error","console","log","setUserToken","token","logout","sessionStorage","removeItem","verifyLoggedIn","getState","isLoginSuccess","isLoginPending","type","SET_LOGIN_PENDING","SET_LOGIN_SUCCESS","loginError","SET_LOGIN_ERROR","SET_USER_TOKEN","callback","post","then","response","setItem","catch","Error"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React from 'react'\nimport { Redirect } from 'react-router'\n\n\nimport * as c from '../redux/constants'\nimport store from '../redux/store'\n\nconst host = 'http://localhost:3005';\n//const host = process.env.API_HOST;\n\n\n//LOGIN\nexport function login(username, password) {\n  return dispatch => {\n    dispatch(setLoginPending(true));\n    dispatch(setLoginSuccess(false));\n    dispatch(setLoginError(null));\n\n    callLoginApi(username, password, (data, error) => {\n      dispatch(setLoginPending(false));\n      if (!error) {\n        console.log(data);\n        dispatch(setUserToken(data.token));\n        dispatch(setLoginSuccess(true));\n        return <Redirect to='/posts' />\n      } else {\n        dispatch(setLoginError(error));\n      }\n    });\n  }\n}\n\nexport function logout(){\n  return dispatch => {\n    sessionStorage.removeItem('CWJWT');\n    dispatch(setLoginSuccess(false));\n  }\n}\n\nexport function verifyLoggedIn(){\n  if(!store.getState().isLoginSuccess === true ){\n    return false\n  }else{\n    return true\n  }\n}\n\nfunction setLoginPending(isLoginPending) {\n  return {\n    type: c.SET_LOGIN_PENDING,\n    isLoginPending\n  };\n}\n\nfunction setLoginSuccess(isLoginSuccess) {\n  return {\n    type: c.SET_LOGIN_SUCCESS,\n    isLoginSuccess\n  };\n}\n\nfunction setLoginError(loginError) {\n  return {\n    type: c.SET_LOGIN_ERROR,\n    loginError\n  }\n}\n\nfunction setUserToken(token) {\n  return {\n    type: c.SET_USER_TOKEN,\n    token\n  }\n}\n\nfunction callLoginApi(username, password, callback) {\n  axios.post(host + '/api/user/login', {\n    username: username,\n    password: password\n  })\n  .then( (response) => {\n    console.log(response)\n    sessionStorage.setItem('CWJWT', response.data.token);\n    return callback(response.data, null);\n  })\n  .catch(function (error) {\n    console.log(null, error);\n    return callback(new Error('Invalid email and password'));\n  });\n}\n"]},"metadata":{},"sourceType":"module"}